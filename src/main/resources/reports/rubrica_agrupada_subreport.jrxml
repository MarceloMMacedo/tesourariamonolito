<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
    name="rubrica_agrupada_subreport"
    columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0"
    uuid="a1b2c3d4-e5f6-7890-1234-567890abcdef">
    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="One Empty Record" />

    <style name="Table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000" />
            <topPen lineWidth="0.5" lineColor="#000000" />
            <leftPen lineWidth="0.5" lineColor="#000000" />
            <bottomPen lineWidth="0.5" lineColor="#000000" />
            <rightPen lineWidth="0.5" lineColor="#000000" />
        </box>
    </style>
    <style name="Table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000" />
            <topPen lineWidth="0.5" lineColor="#000000" />
            <leftPen lineWidth="0.5" lineColor="#000000" />
            <bottomPen lineWidth="0.5" lineColor="#000000" />
            <rightPen lineWidth="0.5" lineColor="#000000" />
        </box>
    </style>

    <parameter name="RUBRICA_DETALHE_SUBREPORT" class="net.sf.jasperreports.engine.JasperReport" />

    <field name="tipoRubrica" class="br.com.sigest.tesouraria.domain.enums.TipoRubrica" />
    <field name="rubricas" class="java.util.List" />
    <field name="totalCategoria" class="java.math.BigDecimal" />

    <group name="RubricaGroup">
        <groupExpression><![CDATA[$F{tipoRubrica}]]></groupExpression>
        <groupHeader>
            <band height="20">
                <textField>
                    <reportElement x="0" y="0" width="555" height="20"
                        uuid="a1b2c3d4-e5f6-7890-1234-567890abcdef" />
                    <textElement verticalAlignment="Middle">
                        <font size="10" isBold="true" />
                    </textElement>
                    <textFieldExpression><![CDATA[$F{tipoRubrica}.toString()]]></textFieldExpression>
                </textField>
            </band>
            <band height="20">
                <staticText>
                    <reportElement x="0" y="0" width="277" height="20"
                        uuid="a1b2c3d4-e5f6-7890-1234-567890abcdef" style="Table_TH" />
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font isBold="true" />
                    </textElement>
                    <text><![CDATA[Rubrica]]></text>
                </staticText>
                <staticText>
                    <reportElement x="277" y="0" width="278" height="20"
                        uuid="a1b2c3d4-e5f6-7890-1234-567890abcdef" style="Table_TH" />
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font isBold="true" />
                    </textElement>
                    <text><![CDATA[Valor]]></text>
                </staticText>
            </band>
        </groupHeader>
        <groupFooter>
            <band height="20">
                <staticText>
                    <reportElement x="0" y="0" width="277" height="20"
                        uuid="a1b2c3d4-e5f6-7890-1234-567890abcdef" style="Table_TD" />
                    <textElement textAlignment="Right" verticalAlignment="Middle">
                        <font isBold="true" />
                    </textElement>
                    <text><![CDATA[Total Categoria:]]></text>
                </staticText>
                <textField pattern="Â¤ #,##0.00">
                    <reportElement x="277" y="0" width="278" height="20"
                        uuid="a1b2c3d4-e5f6-7890-1234-567890abcdef" style="Table_TD" />
                    <textElement verticalAlignment="Middle" />
                    <textFieldExpression><![CDATA[$F{totalCategoria}]]></textFieldExpression>
                </textField>
            </band>
        </groupFooter>
    </group>

    <detail>
        <band height="20" splitType="Stretch">
            <subreport>
                <reportElement x="0" y="0" width="555" height="20"
                    uuid="a1b2c3d4-e5f6-7890-1234-567890abcdef" />
                <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{rubricas})]]></dataSourceExpression>
                <subreportExpression><![CDATA[$P{RUBRICA_DETALHE_SUBREPORT}]]></subreportExpression>
            </subreport>
        </band>
    </detail>
</jasperReport>